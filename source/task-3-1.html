<!DOCTYPE html>
<html lang="ru" class="page">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Решение тестовых задач">
    <title>Тестовое для Nevatrip</title>

    <link rel="preload" href="fonts/open-sans-regular.woff2" as="font" crossorigin="anonymous">
    <link rel="preload" href="fonts/open-sans-600.woff2" as="font" crossorigin="anonymous">

    <link rel="stylesheet" href="css/style.min.css">

    <link rel="icon" href="favicon.ico" type="image/vnd.microsoft.icon">
  </head>
  <body class="page__body">
    <div class="container task">
      <h1 class="task__heading">Решение задания 1 - Билеты на событие</h1>
      <ol>
        <li>
          <h2>Вопрос 1.</h2>
          <p class="task__text">Некоторые события нужно продавать с дополнительными типами билетов - льготный и групповой, у которых будут свои цены и название. Имеется информация, что вероятно, будут другие типы билетов, которые нужно будет добавить. Нужно уметь сохранять при заказе 2 дополнительных типа билета, льготный и групповой в бд. <b>Задача</b> - Показать конечный вид таблицы с добавленными типами билетов. Объяснить свое решение.</p>
          <table class="task__table task__table--1">
            <tr>
              <th>id</th>
              <th>event_id</th>
              <th>event_date</th>
              <th>ticket_adult_price</th>
              <th>ticket_adult_quantity</th>
              <th>ticket_kid_price</th>
              <th>ticket_kid_quantity</th>
              <th>ticket_preferential_price</th>
              <th>ticket_preferential_quantity</th>
              <th>ticket_group_price</th>
              <th>ticket_group_quantity</th>
              <th>barcode</th>
              <th>user_id</th>
              <th>equal_price</th>
              <th>created</th>
            </tr>
            <tr>
              <td>1</td>
              <td>003</td>
              <td>2021-08-21 13:00:00</td>
              <td>700</td>
              <td>1</td>
              <td>450</td>
              <td>0</td>
              <td>550</td>
              <td>0</td>
              <td>2400</td>
              <td>0</td>
              <td>11111111</td>
              <td>00451</td>
              <td>700</td>
              <td>2021-01-11 13:22:09</td>
            </tr>
            <tr>
              <td>2</td>
              <td>006</td>
              <td>2021-07-29 18:00:00</td>
              <td>1000</td>
              <td>0</td>
              <td>800</td>
              <td>2</td>
              <td>700</td>
              <td>2</td>
              <td>3500</td>
              <td>0</td>
              <td>22222222</td>
              <td>00364</td>
              <td>3000</td>
              <td>2021-01-12 16:62:08</td>
            </tr>
            <tr>
              <td>3</td>
              <td>003</td>
              <td>2021-08-15 17:00:00</td>
              <td>700</td>
              <td>4</td>
              <td>450</td>
              <td>3</td>
              <td>550</td>
              <td>0</td>
              <td>2400</td>
              <td>0</td>
              <td>33333333</td>
              <td>00015</td>
              <td>4150</td>
              <td>2021-01-13 10:08:45</td>
            </tr>
          </table>
          <h3>Ответ</h3>
          <p class="task__text">
            Для решения поставленной задачи необходимо добавить в таблицу 4 столбца, по 2 для каждого типа билетов:
          </p>
          <ul>
            <li>с ценой билета</li>
            <li>с количеством приобретенных билетов</li>
          </ul>
        </li>
        <li>
          <h2>Вопрос 2</h2>
          <p class="task__text">Часто посетители из одного заказа приходят не одновременно на события. Возникает необходимость чекинить их по отдельности. Для этого у каждого билета должен быть свой баркод. Если в одном заказе было куплено несколько билетов, 2 взрослых, 3 детских, 4 льготных - то должно быть 9 баркодов для каждого билета соответственно. <b>Задача</b> - Показать конечный вид таблицы, где у каждого билета свой баркод. Объяснить свое решение.</p>
          <table class="task__table task__table--2">
            <tr>
              <th>id</th>
              <th>event_id</th>
              <th>event_date</th>
              <th>ticket_adult_price</th>
              <th>ticket_adult_quantity</th>
              <th>ticket_kid_price</th>
              <th>ticket_kid_quantity</th>
              <th>ticket_preferential_price</th>
              <th>ticket_preferential_quantity</th>
              <th>ticket_group_price</th>
              <th>ticket_group_quantity</th>
              <th>barcode</th>
              <th>user_id</th>
              <th>equal_price</th>
              <th>created</th>
            </tr>
            <tr>
              <td>1</td>
              <td>003</td>
              <td>2021-08-21 13:00:00</td>
              <td>700</td>
              <td>2</td>
              <td>450</td>
              <td>3</td>
              <td>550</td>
              <td>4</td>
              <td>2400</td>
              <td>0</td>
              <td></td>
              <td>00451</td>
              <td>4950</td>
              <td>2021-01-11 13:22:09</td>
            </tr>
            <tr>
              <td>1</td>
              <td>003</td>
              <td>2021-08-21 13:00:00</td>
              <td>700</td>
              <td>1</td>
              <td>450</td>
              <td>0</td>
              <td>550</td>
              <td>0</td>
              <td>2400</td>
              <td>0</td>
              <td>01301000</td>
              <td>00451</td>
              <td>700</td>
              <td>2021-01-11 13:22:09</td>
            </tr>
            <tr>
              <td>1</td>
              <td>003</td>
              <td>2021-08-21 13:00:00</td>
              <td>700</td>
              <td>1</td>
              <td>450</td>
              <td>0</td>
              <td>550</td>
              <td>0</td>
              <td>2400</td>
              <td>0</td>
              <td>01302000</td>
              <td>00451</td>
              <td>700</td>
              <td>2021-01-11 13:22:09</td>
            </tr>
            <tr>
              <td>1</td>
              <td>003</td>
              <td>2021-08-21 13:00:00</td>
              <td>700</td>
              <td>0</td>
              <td>450</td>
              <td>1</td>
              <td>550</td>
              <td>0</td>
              <td>2400</td>
              <td>0</td>
              <td>01300100</td>
              <td>00451</td>
              <td>450</td>
              <td>2021-01-11 13:22:09</td>
            </tr>
            <tr>
              <td>1</td>
              <td>003</td>
              <td>2021-08-21 13:00:00</td>
              <td>700</td>
              <td>0</td>
              <td>450</td>
              <td>1</td>
              <td>550</td>
              <td>0</td>
              <td>2400</td>
              <td>0</td>
              <td>01300200</td>
              <td>00451</td>
              <td>450</td>
              <td>2021-01-11 13:22:09</td>
            </tr>
            <tr>
              <td>1</td>
              <td>003</td>
              <td>2021-08-21 13:00:00</td>
              <td>700</td>
              <td>0</td>
              <td>450</td>
              <td>1</td>
              <td>550</td>
              <td>0</td>
              <td>2400</td>
              <td>0</td>
              <td>01300300</td>
              <td>00451</td>
              <td>450</td>
              <td>2021-01-11 13:22:09</td>
            </tr>
            <tr>
              <td>1</td>
              <td>003</td>
              <td>2021-08-21 13:00:00</td>
              <td>700</td>
              <td>0</td>
              <td>450</td>
              <td>0</td>
              <td>550</td>
              <td>1</td>
              <td>2400</td>
              <td>0</td>
              <td>01300010</td>
              <td>00451</td>
              <td>550</td>
              <td>2021-01-11 13:22:09</td>
            </tr>
            <tr>
              <td>1</td>
              <td>003</td>
              <td>2021-08-21 13:00:00</td>
              <td>700</td>
              <td>0</td>
              <td>450</td>
              <td>0</td>
              <td>550</td>
              <td>1</td>
              <td>2400</td>
              <td>0</td>
              <td>01300020</td>
              <td>00451</td>
              <td>550</td>
              <td>2021-01-11 13:22:09</td>
            </tr>
            <tr>
              <td>1</td>
              <td>003</td>
              <td>2021-08-21 13:00:00</td>
              <td>700</td>
              <td>0</td>
              <td>450</td>
              <td>0</td>
              <td>550</td>
              <td>1</td>
              <td>2400</td>
              <td>0</td>
              <td>01300030</td>
              <td>00451</td>
              <td>550</td>
              <td>2021-01-11 13:22:09</td>
            </tr>
            <tr>
              <td>1</td>
              <td>003</td>
              <td>2021-08-21 13:00:00</td>
              <td>700</td>
              <td>0</td>
              <td>450</td>
              <td>0</td>
              <td>550</td>
              <td>1</td>
              <td>2400</td>
              <td>0</td>
              <td>01300040</td>
              <td>00451</td>
              <td>550</td>
              <td>2021-01-11 13:22:09</td>
            </tr>
          </table>
          <h3>Ответ</h3>
          <p class="task_text">
            За исходные условия взял пример баркода из задания - он восьмизначный. Пусть первые 3 символа характеризуют id заказа и id мероприятия - "013" - эти цифры будут одинаковыми для всех билетов этого заказа. Баркод заказа, если он необходим, будет выглядеть как "01300000".<br>
            Последние 4 цифры баркода отвечают за 4 типа билетов. Пятый символ за взрослые, шестой за детские, седьмой - льготные, восьмой - групповые. Каждый билет в своем классе увеличивает итератор в соответствующем знаке от 1 до 9. Таким образом, для третьего льготного билета в заказе баркод будет выглядеть как "01300030", а восьмой взрослый - "01308000".<br>
            В случае, если билетов одного типа в заказе больше 9, используется четвертый знак в качестве модификатора, тогда шестнадцатый детский билет будет името баркод "01310700".</p>
        </li>
      </ol>
    </div>
  </body>
</html>
